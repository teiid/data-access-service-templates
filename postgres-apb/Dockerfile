FROM ansibleplaybookbundle/apb-base

LABEL "com.redhat.apb.version"="0.1.0"
LABEL "com.redhat.apb.spec"=\
"IyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMj\
IyMjIyMjIyMjIyMjIyMjIyMjCiMgU2hhcmVkIFBhcmFtZXRlcnMKIyMjIyMjIyMjIyMjIyMjIyMj\
IyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMj\
Cl9wOiAmX3AKICAtIG5hbWU6IHBvc3RncmVzcWxfZGF0YWJhc2UKICAgIHRpdGxlOiBQb3N0Z3Jl\
U1FMIERhdGFiYXNlIE5hbWUKICAgIHR5cGU6IHN0cmluZwogICAgZGVmYXVsdDogdGVzdAogIC0g\
bmFtZTogcG9zdGdyZXNxbF9zY2hlbWEKICAgIHRpdGxlOiBQb3N0Z3JlU1FMIERhdGFiYXNlIFNj\
aGVtYSBOYW1lCiAgICB0eXBlOiBzdHJpbmcKICAgIGRlZmF1bHQ6IHB1YmxpYwogIC0gbmFtZTog\
cG9zdGdyZXNxbF9ob3N0CiAgICB0aXRsZTogUG9zdGdyZVNRTCBEYXRhYmFzZSBIb3N0CiAgICB0\
eXBlOiBzdHJpbmcKICAtIG5hbWU6IHBvc3RncmVzcWxfcG9ydAogICAgdGl0bGU6IFBvc3RncmVT\
UUwgRGF0YWJhc2UgUG9ydAogICAgdHlwZTogaW50CiAgICBkZWZhdWx0OiA1NDMyCiMjIyMjIyMj\
IyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMj\
IyMjIyMjIyMjIyMjIyMKIwojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMj\
IyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCl9iaW5kcDogJl9iaW5kcAog\
IC0gbmFtZTogcG9zdGdyZXNxbF91c2VyCiAgICB0aXRsZTogUG9zdGdyZVNRTCBVc2VyCiAgICB0\
eXBlOiBzdHJpbmcKICAgIGRlZmF1bHQ6IGxlbm55CiAgLSBuYW1lOiBwb3N0Z3Jlc3FsX3Bhc3N3\
b3JkCiAgICB0aXRsZTogUG9zdGdyZVNRTCBQYXNzd29yZAogICAgdHlwZTogc3RyaW5nCiAgICBk\
ZWZhdWx0OiBsZW5vcmQKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMj\
IyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwp2ZXJzaW9uOiAxLjAgICAgCm5h\
bWU6IGV4dC1wb3N0Z3Jlcy1hcGIKaW1hZ2U6IHJhcmVkZHlhcGIvZXh0LXBvc3RncmVzLWFwYgpk\
ZXNjcmlwdGlvbjogVGhlIGNvbm5lY3Rpb24gc2VydmljZSB0byBleHRlcm5hbCBvbiBwcmVtaXNl\
cyBQb3N0Z3JlcyBEYXRhYmFzZQpiaW5kYWJsZTogVHJ1ZQp0YWdzOgogIC0gZGF0YWJhc2UKICAt\
IHJkYm1zCiAgLSBvbl9wcmVtaXNlCmFzeW5jOiBvcHRpb25hbAptZXRhZGF0YToKICBkaXNwbGF5\
TmFtZTogUG9zdGdyZVNRTChFeHRlcm5hbCkKICBsb25nRGVzY3JpcHRpb246ICJDb25uZWN0aW9u\
IHRvIG9uIHByZW1pc2VzIFBvc3RncmVzIERhdGFiYXNlIHdoaWNoIGlzIGhvc3RlZCBvdXRzaWRl\
IG9mIGNsb3VkIAogICAgZW52aXJvbm1lbnQuIFRoaXMgd2lsbCBiZSBhY2Nlc3NlZCBlaXRoZXIg\
dGhyb3VnaCBhIHByb3h5IG9yIFZQTiBjb25uZWN0aW9uIGZvciBzZWN1cml0eSByZWFzb25zIgog\
IGltYWdlVXJsOiBodHRwczovL3dpa2kucG9zdGdyZXNxbC5vcmcvaW1hZ2VzLzMvMzAvUG9zdGdy\
ZVNRTF9sb2dvLjNjb2xvcnMuMTIweDEyMC5wbmcgCiAgZG9jdW1lbnRhdGlvblVybDogaHR0cHM6\
Ly93d3cucG9zdGdyZXNxbC5vcmcvIApwbGFuczoKICAtIG5hbWU6IGRlZmF1bHQKICAgIGRlc2Ny\
aXB0aW9uOiBTZXJ2aWNlIEJyb2tlciBmb3IgY3JlYXRpbmcgY29ubmVjdGlvbnMgdG8gZXh0ZXJu\
YWwgUG9zdGdyZXMgZGF0YWJhc2UKICAgIGZyZWU6IFRydWUKICAgIG1ldGFkYXRhOgogICAgICBk\
aXNwbGF5TmFtZTogRGVmYXVsdAogICAgICBsb25nRGVzY3JpcHRpb246IFRoaXMgcGxhbiBkZXBs\
b3lzIGEgUG9zdGdyZXMgRGF0YWJhc2UsIGlmIHRoZSBkZWZpbmVkIGRhdGFiYXNlIGlzIG5vdCBh\
dmFpbGFibGUgaXQgdHJpZXMgdG8gY3JlYXRlIG9uZS4gCiAgICAgIGNvc3Q6ICQwLjAwCiAgICBw\
YXJhbWV0ZXJzOiAqX3AKICAgIGJpbmRfcGFyYW1ldGVyczogKl9iaW5kcAoK"

COPY playbooks /opt/apb/actions
COPY roles /opt/ansible/roles
RUN chmod -R g=u /opt/{ansible,apb}

USER apb


